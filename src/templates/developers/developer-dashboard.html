{% macro emptyGames() %}
  {{ _('You do not own any games.') }}
{% endmacro %}

<h1>{{ _('My Games') }}</h1>
{% defer (url=api('game.list')) %}
  <table class="myGames-table">
    <thead>
      <tr>
        <th>{{ _('Game') }}</th>
        <th>{{ _('Status') }}</th>
        <th>{{ _('Queue Position') }}</th>
        <th>{{ _('Waiting Time') }}</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% for game in this|sort(attribute='created') %}
        <tr data-game-slug="{{ game.slug }}" data-game-title="{{ game.name }}">
          <td><a href="{{ game.app_url }}">{{ game.name }}</a></td>
          <td></td>
          <td></td>
          <td>{{ game.created|relativeDate }}</td>
          <td class="myGames-buttons">
            <a class="btn btn-blue" href="/game/{{ game.slug }}/detail" target="_blank"><div class="btn-text">{{ _('View') }}</div></a>
            <a class="btn btn-green" href="/game/{{ game.slug }}/edit"><div class="btn-text">{{ _('Edit') }}</div></a>
            <a class="btn btn-red myGames-delete"><div class="btn-text">{{ _('Delete') }}</div></a>
            <a class="btn myGames-disable"><div class="btn-text">{{ _('Disable') }}</div></a>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
  <div id="empty-message" class="hidden">
    {{ emptyGames() }}
  </div>
{% placeholder %}
  {{ _('Loading games...') }}
{% empty %}
  {{ emptyGames() }}
{% except %}
  {% if error == 403 %}
    {{ _('You are not authorized to access this page.') }}
  {% else %}
    {{ _('Oh no! An error occurred.') }}
  {% endif %}
{% end %}
